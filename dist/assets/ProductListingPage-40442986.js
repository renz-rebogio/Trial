import{G as p,E as x,w as g,R as n,j as e,q as f,x as h}from"./index-59f5f71c.js";import{P as v}from"./ProductSubmissionForm-e6c50523.js";import"./types-9a93e89b.js";import"./textarea-e62d43bd.js";import"./select-4f727b9b.js";import"./index-be2d9432.js";import"./checkbox-5ec660f3.js";import"./upload-cloud-99f1496b.js";import"./x-circle-3542237b.js";import"./video-e62a3e1e.js";import"./plus-circle-3fa46472.js";const E=()=>{const t=p(),{user:s}=x(),{toast:r}=g(),[l,d]=n.useState(null),[u,i]=n.useState(!0);n.useEffect(()=>{(async()=>{if(!s){t("/auth?type=login&redirect=/seller/list-product"),i(!1);return}i(!0);try{const{data:a,error:o}=await h.from("sellers").select("id, status").eq("user_id",s.id).maybeSingle();if(o&&o.code!=="PGRST116"){r({variant:"destructive",title:"Error fetching seller data",description:o.message}),t("/seller-dashboard");return}if(!a){r({variant:"warning",title:"Seller Account Not Found",description:"Please complete your seller registration first."}),t("/sell-on-boogasi");return}if(a.status!=="active"&&a.status!=="pending_approval"&&a.status!=="pending_agreement"){r({variant:"warning",title:"Seller Account Inactive",description:"Your seller account is not active or pending approval. Please complete onboarding."}),t("/sell-on-boogasi");return}d(a)}catch{r({variant:"destructive",title:"Failed to load seller data",description:"An unexpected error occurred."}),t("/seller-dashboard")}finally{i(!1)}})()},[s,t,r]);const m=c=>{r({title:"Product Submitted!",description:`${c.title} is now pending approval.`}),t("/seller-dashboard")};return u?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[e.jsx(f,{className:"h-16 w-16 animate-spin text-primary mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading product form..."})]}):l?e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:"List a New Digital Product"}),e.jsx("div",{className:"max-w-3xl mx-auto p-6 sm:p-8 bg-card text-card-foreground rounded-xl shadow-2xl glassmorphic",children:e.jsx(v,{sellerData:l,onProductSubmitted:m})})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"Seller account not found or not active. Redirecting..."})})};export{E as default};
