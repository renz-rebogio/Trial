import{c as j,u as a,G as v,w as N,x as p,j as s,m as b,p as h,I as w,a as P,q as C}from"./index-26d6c1e3.js";import{C as E,a as S,b as L,d as R,c as k}from"./card-024815dc.js";const q=j("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),F=()=>{const[r,x]=a.useState(""),[i,f]=a.useState(""),[c,d]=a.useState(!1),[l,u]=a.useState(""),[m,n]=a.useState(""),g=v(),{toast:o}=N();a.useEffect(()=>{const{data:{subscription:e}}=p.auth.onAuthStateChange((t,I)=>{});return()=>e.unsubscribe()},[]);const y=async e=>{if(e.preventDefault(),n(""),u(""),r!==i){n("Passwords do not match."),o({variant:"destructive",title:"Error",description:"Passwords do not match."});return}if(r.length<8){n("Password must be at least 8 characters long."),o({variant:"destructive",title:"Error",description:"Password must be at least 8 characters long."});return}d(!0);try{const{error:t}=await p.auth.updateUser({password:r});if(t)throw t;u("Password updated successfully! You can now log in with your new password."),o({title:"Success",description:"Password updated successfully!"}),setTimeout(()=>g("/auth?type=login"),3e3)}catch(t){n(t.message),o({variant:"destructive",title:"Error updating password",description:t.message})}finally{d(!1)}};return s.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)] py-12",children:s.jsx(b.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"w-full max-w-md",children:s.jsxs(E,{className:"shadow-2xl",children:[s.jsxs(S,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center items-center mb-4",children:s.jsx(q,{className:"h-12 w-12 text-primary"})}),s.jsx(L,{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:"Set New Password"}),s.jsx(R,{className:"text-muted-foreground",children:"Enter your new password below."})]}),s.jsx(k,{children:s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"new-password",children:"New Password"}),s.jsx(w,{id:"new-password",type:"password",value:r,onChange:e=>x(e.target.value),required:!0,minLength:8})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsx(w,{id:"confirm-password",type:"password",value:i,onChange:e=>f(e.target.value),required:!0,minLength:8})]}),m&&s.jsx("p",{className:"text-sm text-destructive",children:m}),l&&s.jsx("p",{className:"text-sm text-green-600",children:l}),s.jsxs(P,{type:"submit",className:"w-full",disabled:c,children:[c?s.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Update Password"]})]})})]})})})};export{F as default};
